var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,i=(e,t,n)=>new Promise(((s,r)=>{var i=e=>{try{o(n.next(e))}catch(t){r(t)}},a=e=>{try{o(n.throw(e))}catch(t){r(t)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,a);o((n=n.apply(e,t)).next())}));import{P as a,j as o,B as l,d as c,A as d,R as p,C as g}from"./vendor-bootstrap-CDKGkX3Y.js";import{r as m,R as u}from"./vendor-react-CSr-5IoM.js";import{u as h,c as v,b as y}from"./vendor-router-D9z9DFGH.js";import{S as f}from"./SEOHead-Cvw0U6b7.js";import{h as j,C as b,T as x,M as w}from"./index-BzUMVULD.js";import{C as _,M as N}from"./MovieCardSkeleton-CA0lxj7o.js";import"./vendor-redux-DhM9Zidd.js";import"./vendor-query-BOtKDBw2.js";import"./vendor-ui-C66qigmO.js";function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var P=m.forwardRef((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,r=e.size,i=void 0===r?24:r,a=O(e,["color","size"]);return u.createElement("svg",S({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),u.createElement("polyline",{points:"11 17 6 12 11 7"}),u.createElement("polyline",{points:"18 17 13 12 18 7"}))}));function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},M.apply(this,arguments)}function k(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}P.propTypes={color:a.string,size:a.oneOfType([a.string,a.number])},P.displayName="ChevronsLeft";var C,F=m.forwardRef((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,r=e.size,i=void 0===r?24:r,a=k(e,["color","size"]);return u.createElement("svg",M({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),u.createElement("polyline",{points:"13 17 18 12 13 7"}),u.createElement("polyline",{points:"6 17 11 12 6 7"}))}));F.propTypes={color:a.string,size:a.oneOfType([a.string,a.number])},F.displayName="ChevronsRight";class E{static getMovies(){return i(this,arguments,(function*(e={}){try{const t={page:e.page||1,per_page:e.per_page||20};e.search&&(t.search=e.search),e.genre&&(t.genre=e.genre),e.vj&&(t.vj=e.vj),e.type&&"All"!==e.type&&(t.type=e.type),e.year&&(t.year=e.year),void 0!==e.is_premium&&(t.is_premium=e.is_premium?1:0),e.is_first_episode&&(t.is_first_episode=e.is_first_episode),e.category&&(t.category=e.category),e.language&&(t.language=e.language),t.sort_by=e.sort_by||"created_at",t.sort_dir=e.sort_dir||"desc";return yield j(this.moviesEndpoint,t)}catch(t){throw t}}))}static searchMovies(e,t=1,n=20){return i(this,null,(function*(){return yield this.getMovies({search:e,page:t,per_page:n})}))}static getMoviesByType(e){return i(this,arguments,(function*(e,i=1,a=20,o={}){const l=((e,i)=>{for(var a in i||(i={}))n.call(i,a)&&r(e,a,i[a]);if(t)for(var a of t(i))s.call(i,a)&&r(e,a,i[a]);return e})({type:e,page:i,per_page:a},o);return"Series"===e&&(l.is_first_episode="Yes"),yield this.getMovies(l)}))}static getMoviesByGenre(e,t=1,n=20){return i(this,null,(function*(){return yield this.getMovies({genre:e,page:t,per_page:n})}))}static getMoviesByVJ(e,t=1,n=20){return i(this,null,(function*(){return yield this.getMovies({vj:e,page:t,per_page:n})}))}static getPremiumMovies(e=1,t=20){return i(this,null,(function*(){return yield this.getMovies({is_premium:!0,page:e,per_page:t})}))}static getRandomMovie(){return i(this,null,(function*(){var e;try{const t=yield j("random-movie",{});return 1===t.code&&(null==(e=t.data)?void 0:e.movie)?t.data.movie:null}catch(t){return null}}))}static getMovieById(e){return i(this,null,(function*(){var t;try{const n=yield j(`movies/${e}`,{});return 1===n.code&&(null==(t=n.data)?void 0:t.movie)?n.data.movie:null}catch(n){return null}}))}static buildQueryString(e){const t=new URLSearchParams;return Object.entries(e).forEach((([e,n])=>{null!=n&&""!==n&&t.append(e,String(n))})),t.toString()}static getDefaultFilters(){return{page:1,per_page:20,sort_by:"created_at",sort_dir:"desc"}}}r(E,"symbol"!=typeof(C="moviesEndpoint")?C+"":C,"movies");const $=({currentPage:e,totalPages:t,totalItems:n,itemsPerPage:s,onPageChange:r,isLoading:i=!1,showPageNumbers:a=!0,maxPageNumbers:c=5,className:d=""})=>{const p=(()=>{const n=[];if(t<=c)for(let e=1;e<=t;e++)n.push(e);else{const s=Math.floor(c/2);let r=Math.max(1,e-s),i=Math.min(t,e+s);e<=s?i=c:e>=t-s&&(r=t-c+1);for(let e=r;e<=i;e++)n.push(e)}return n})(),g=(e-1)*s+1,m=Math.min(e*s,n),u=n=>{n>=1&&n<=t&&n!==e&&!i&&(r(n),window.scrollTo({top:0,behavior:"smooth"}))};return t<=1?null:o.jsxs("div",{className:`pagination-wrapper ${d}`,children:[o.jsx("div",{className:"pagination-info",children:o.jsxs("span",{className:"pagination-text",children:["Showing ",o.jsxs("strong",{children:[g,"-",m]})," of ",o.jsx("strong",{children:n})," movies"]})}),o.jsxs("nav",{className:"pagination-controls","aria-label":"Movies pagination",children:[o.jsx(l,{variant:"outline-secondary",onClick:()=>u(1),disabled:1===e||i,className:"pagination-btn pagination-btn-first d-none d-md-flex","aria-label":"Go to first page",children:o.jsx(P,{size:18})}),o.jsxs(l,{variant:"outline-secondary",onClick:()=>u(e-1),disabled:1===e||i,className:"pagination-btn pagination-btn-prev","aria-label":"Go to previous page",children:[o.jsx(_,{size:18}),o.jsx("span",{className:"d-none d-sm-inline",children:"Previous"})]}),a&&o.jsxs("div",{className:"pagination-pages",children:[p[0]>1&&o.jsxs(o.Fragment,{children:[o.jsx(l,{variant:"outline-secondary",onClick:()=>u(1),disabled:i,className:"pagination-btn pagination-btn-page d-none d-md-flex",children:"1"}),p[0]>2&&o.jsx("span",{className:"pagination-ellipsis d-none d-md-inline",children:"..."})]}),p.map((t=>o.jsx(l,{variant:t===e?"primary":"outline-secondary",onClick:()=>u(t),disabled:i,className:"pagination-btn pagination-btn-page "+(t===e?"active":""),"aria-label":`Go to page ${t}`,"aria-current":t===e?"page":void 0,children:t},t))),p[p.length-1]<t&&o.jsxs(o.Fragment,{children:[p[p.length-1]<t-1&&o.jsx("span",{className:"pagination-ellipsis d-none d-md-inline",children:"..."}),o.jsx(l,{variant:"outline-secondary",onClick:()=>u(t),disabled:i,className:"pagination-btn pagination-btn-page d-none d-md-flex",children:t})]})]}),o.jsxs(l,{variant:"outline-secondary",onClick:()=>u(e+1),disabled:e===t||i,className:"pagination-btn pagination-btn-next","aria-label":"Go to next page",children:[o.jsx("span",{className:"d-none d-sm-inline",children:"Next"}),o.jsx(b,{size:18})]}),o.jsx(l,{variant:"outline-secondary",onClick:()=>u(t),disabled:e===t||i,className:"pagination-btn pagination-btn-last d-none d-md-flex","aria-label":"Go to last page",children:o.jsx(F,{size:18})})]}),o.jsxs("div",{className:"pagination-mobile-info d-md-none",children:["Page ",e," of ",t]})]})},B=({contentType:e})=>{const t=h(),{type:n}=v(),[s,r]=y(),a=m.useMemo((()=>e||("series"===n?"Series":"movies"===n?"Movie":"All")),[e,n]),[l,u]=m.useState([]),[j,b]=m.useState(!0),[_,S]=m.useState(null),[O,P]=m.useState(1),[M,k]=m.useState(1),[C,F]=m.useState(0),[B,z]=m.useState(20),T=s.get("search")||"";m.useEffect((()=>{R()}),[O,a,T]),m.useEffect((()=>{const e=s.get("page");e&&P(parseInt(e))}),[]);const R=m.useCallback((()=>i(void 0,null,(function*(){try{b(!0),S(null);const e={page:O,per_page:B,type:"All"!==a?a:void 0,sort_by:"created_at",sort_dir:"desc"};T&&(e.search=T),"Series"===a&&(e.is_first_episode="Yes");const t=yield E.getMovies(e);if(1!==t.code||!t.data)throw new Error(t.message||"Failed to load movies");u(t.data.items),k(t.data.pagination.last_page),F(t.data.pagination.total),z(t.data.pagination.per_page)}catch(e){S(e.message||"Failed to load movies. Please try again."),x.error("Failed to load movies")}finally{b(!1)}}))),[O,a,B,T]),U=m.useCallback((e=>{P(e),s.set("page",e.toString()),r(s)}),[s,r]),L=m.useCallback((e=>{t(`/watch/${e.id}`)}),[t]),A=m.useCallback((e=>{t(`/watch/${e.id}`),x.success(`Playing ${e.title}`)}),[t]),G=m.useCallback((e=>{x.success(`Added ${e.title} to watchlist`)}),[]),I=()=>T?`Search Results for "${T}"`:"Series"===a?"Browse Series":"Movie"===a?"Browse Movies":"Browse Content";return o.jsxs(o.Fragment,{children:[o.jsx(f,{config:{basic:{title:`${I()} | UgFlix`,description:`Browse and discover ${"Series"===a?"series":"Movie"===a?"movies":"content"} on UgFlix. Filter by genre, VJ, and more.`},openGraph:{title:`${I()} | UgFlix`,description:`Browse and discover ${"Series"===a?"series":"Movie"===a?"movies":"content"} on UgFlix`,type:"website",siteName:"UgFlix",locale:"en_US"},twitter:{card:"summary_large_image",title:`${I()} | UgFlix`,description:`Browse and discover ${"Series"===a?"series":"Movie"===a?"movies":"content"} on UgFlix`}}}),o.jsx("div",{className:"movies-page",children:o.jsxs(c,{fluid:!0,className:"movies-content",children:[_&&o.jsxs(d,{variant:"danger",className:"movies-error",children:[o.jsx(d.Heading,{children:"Oops! Something went wrong"}),o.jsx("p",{children:_})]}),j&&0===l.length&&o.jsx(p,{className:"movies-grid",children:Array.from({length:B}).map(((e,t)=>o.jsx(g,{xs:6,sm:4,md:3,lg:2,className:"movie-col",children:o.jsx(N,{})},t)))}),!j&&0===l.length&&!_&&o.jsxs("div",{className:"movies-empty",children:[o.jsx("div",{className:"empty-icon",children:"ðŸŽ¬"}),T?o.jsxs(o.Fragment,{children:[o.jsxs("h3",{children:['No results found for "',T,'"']}),o.jsx("p",{children:"Try searching with different keywords or browse all content."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h3",{children:["No ","Series"===a?"series":"movies"," found"]}),o.jsx("p",{children:"Check back later for new content."})]})]}),l.length>0&&o.jsx(p,{className:"movies-grid",children:l.map((e=>o.jsx(g,{xs:6,sm:4,md:3,lg:2,className:"movie-col",children:o.jsx(w,{movie:e,onClick:L,onPlay:A,onAddToWatchlist:G,showProgress:!0})},e.id)))}),l.length>0&&!j&&o.jsx($,{currentPage:O,totalPages:M,totalItems:C,itemsPerPage:B,onPageChange:U,isLoading:j})]})})]})};export{B as default};
