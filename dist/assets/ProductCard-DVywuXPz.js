import{j as n}from"./vendor-bootstrap-CDKGkX3Y.js";import{r}from"./vendor-react-CSr-5IoM.js";import{L as e}from"./vendor-router-D9z9DFGH.js";import{u as t,a as i}from"./vendor-redux-DhM9Zidd.js";import{s as a,k as o,l as c,m as s,n as d,o as p,g as l,p as u,r as x,q as m}from"./index-C_CdsbTE.js";if("undefined"!=typeof document){const n="product-card-styles";if(!document.getElementById(n)){const r=document.createElement("style");r.id=n,r.textContent="\n  .product-card {\n    background-color: var(--ugflix-bg-secondary);\n    border-radius: 0px;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    transition: all 0.3s ease;\n    cursor: pointer;\n    border: 1px solid var(--ugflix-border);\n    position: relative;\n  }\n\n  .product-card:hover {\n    transform: translateY(-2px);\n    box-shadow: var(--ugflix-shadow-hover);\n    border-color: var(--ugflix-primary);\n  }\n\n  .product-card-image-container {\n    position: relative;\n    width: 100%;\n    aspect-ratio: 1;\n    overflow: hidden;\n    background: var(--ugflix-bg-card);\n  }\n\n  .product-card-image {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease, opacity 0.3s ease;\n  }\n\n  .product-card-image.loading {\n    opacity: 0;\n  }\n\n  .product-card-image.loaded {\n    opacity: 1;\n  }\n\n  .product-card:hover .product-card-image {\n    transform: scale(1.03);\n  }\n\n  .product-card-shimmer {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(\n      90deg,\n      var(--ugflix-bg-card) 0%,\n      var(--ugflix-border) 50%,\n      var(--ugflix-bg-card) 100%\n    );\n    background-size: 200% 100%;\n    animation: shimmer 1.5s infinite;\n    z-index: 1;\n  }\n\n  @keyframes shimmer {\n    0% { background-position: -200% 0; }\n    100% { background-position: 200% 0; }\n  }\n\n  .product-card-discount-badge {\n    position: absolute;\n    top: 8px;\n    left: 8px;\n    background-color: var(--ugflix-accent);\n    color: var(--ugflix-text-primary);\n    padding: 4px 8px;\n    border-radius: 0px;\n    font-size: 10px;\n    font-weight: 600;\n    z-index: 3;\n    line-height: 1;\n  }\n\n  .product-card-wishlist-btn {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    width: 32px;\n    height: 32px;\n    background-color: rgba(15, 15, 15, 0.9);\n    backdrop-filter: blur(4px);\n    border: none;\n    border-radius: 0px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 14px;\n    color: var(--ugflix-text-secondary);\n    cursor: pointer;\n    transition: all 0.2s ease;\n    z-index: 3;\n  }\n\n  .product-card-wishlist-btn:hover {\n    background-color: var(--ugflix-primary);\n    color: var(--ugflix-text-primary);\n    transform: scale(1.1);\n  }\n\n  .product-card-wishlist-btn.active {\n    background-color: var(--ugflix-primary);\n    color: var(--ugflix-text-primary);\n  }\n\n  .product-card-wishlist-btn.loading {\n    opacity: 0.7;\n    cursor: not-allowed;\n    animation: pulse 1.5s infinite;\n  }\n\n  .product-card-wishlist-btn.loading:hover {\n    transform: none;\n    background-color: rgba(15, 15, 15, 0.9);\n    color: var(--ugflix-text-secondary);\n  }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 0.7; }\n    50% { opacity: 1; }\n  }\n\n  @keyframes wishlistSuccess {\n    0% { transform: scale(1); }\n    50% { transform: scale(1.3); }\n    100% { transform: scale(1); }\n  }\n\n  .product-card-wishlist-btn.success-animation {\n    animation: wishlistSuccess 0.4s ease;\n  }\n\n  .product-card-info {\n    padding: 12px;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .product-card-name {\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--ugflix-text-primary);\n    margin: 0;\n    line-height: 1.3;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    height: 2.6em;\n    text-decoration: none;\n  }\n\n  .product-card-pricing {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n  }\n\n  .product-card-price-new {\n    font-size: 15px;\n    font-weight: 600;\n    color: var(--ugflix-primary);\n    margin: 0;\n    line-height: 1.2;\n  }\n\n  .product-card-price-old {\n    font-size: 12px;\n    color: var(--ugflix-text-muted);\n    text-decoration: line-through;\n    margin: 0;\n    line-height: 1.2;\n  }\n\n  .product-card-reviews {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    margin-top: 4px;\n  }\n\n  .product-card-review-stars {\n    display: flex;\n    gap: 1px;\n  }\n\n  .product-card-review-star {\n    font-size: 12px;\n    color: var(--ugflix-accent);\n  }\n\n  .product-card-review-star.empty {\n    color: var(--ugflix-border);\n  }\n\n  .product-card-review-count {\n    font-size: 11px;\n    color: var(--ugflix-text-secondary);\n  }\n\n  /* Responsive Design */\n  @media (max-width: 991px) {\n    .product-card-image-container {\n      aspect-ratio: 1.1;\n    }\n    \n    .product-card-info {\n      padding: 10px;\n      gap: 6px;\n    }\n    \n    .product-card-name {\n      font-size: 12px;\n      height: 2.4em;\n    }\n    \n    .product-card-price-new {\n      font-size: 14px;\n    }\n    \n    .product-card-price-old {\n      font-size: 11px;\n    }\n    \n    .product-card-discount-badge {\n      font-size: 9px;\n      padding: 3px 6px;\n    }\n    \n    .product-card-wishlist-btn {\n      width: 28px;\n      height: 28px;\n      font-size: 12px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    .product-card-image-container {\n      aspect-ratio: 1;\n    }\n    \n    .product-card-info {\n      padding: 8px;\n      gap: 5px;\n    }\n    \n    .product-card-name {\n      font-size: 11px;\n      height: 2.2em;\n    }\n    \n    .product-card-price-new {\n      font-size: 13px;\n    }\n    \n    .product-card-price-old {\n      font-size: 10px;\n    }\n    \n    .product-card-review-stars {\n      gap: 0;\n    }\n    \n    .product-card-review-star {\n      font-size: 10px;\n    }\n    \n    .product-card-review-count {\n      font-size: 10px;\n    }\n  }\n",document.head.appendChild(r)}}const g=({product:g,className:f="",showStock:h=!0})=>{const v=t(),[w,b]=r.useState(!1),[y,j]=r.useState(!1),[k,z]=r.useState(!1),N=i((n=>{var r;const e=n.wishlist.items.some((n=>n.product_id===g.id)),t=((null==(r=n.manifest.data)?void 0:r.wishlist)||[]).some((n=>n.product_id===g.id||n.id===g.id));return e||t})),S=i((n=>a(n))),_=i((n=>o(n))),P=i((n=>c(n)));r.useEffect((()=>{P&&_&&(_.wishlist&&_.wishlist.length>0?v(s(_.wishlist)):_.wishlist||v(d()))}),[v,P,_]);const C=p(g.price_2,g.price_1),E=parseFloat(g.price_1),I=parseFloat(g.price_2),L=Number(g.rating)||Number(g.average_rating)||0,M=Number(g.reviewsCount)||Number(g.review_count)||0;let $;$=g&&"getMainImage"in g&&"function"==typeof g.getMainImage?g.getMainImage():l(g);return n.jsxs("div",{className:`product-card ${f}`,children:[n.jsxs(e,{to:u(g.id),className:"product-card-image-container",children:[!w&&n.jsx("div",{className:"product-card-shimmer"}),n.jsx("img",{src:$,alt:g.name,className:"product-card-image "+(w?"loaded":"loading"),onLoad:()=>b(!0),onError:n=>{n.currentTarget.src="/media/svg/files/blank-image.svg",n.currentTarget.onerror=null,b(!0)}}),C>0&&n.jsxs("div",{className:"product-card-discount-badge",children:["-",C,"%"]}),n.jsx("button",{className:`product-card-wishlist-btn ${N?"active":""} ${y||S?"loading":""} ${k?"success-animation":""}`,onClick:n=>{return r=void 0,e=null,t=function*(){if(n.preventDefault(),n.stopPropagation(),!y&&!S){j(!0);try{N?yield v(x(g.id)).unwrap():yield v(m(g.id)).unwrap(),z(!0),setTimeout((()=>z(!1)),400)}catch(r){}finally{j(!1)}}},new Promise(((i,a)=>{var o=r=>{try{s(t.next(r))}catch(n){a(n)}},c=r=>{try{s(t.throw(r))}catch(n){a(n)}},s=n=>n.done?i(n.value):Promise.resolve(n.value).then(o,c);s((t=t.apply(r,e)).next())}));var r,e,t},disabled:y||S,title:y?"Processing...":N?"Remove from wishlist":"Add to wishlist",children:y||S?"⟳":N?"♥":"♡"})]}),n.jsxs("div",{className:"product-card-info",children:[n.jsx(e,{to:u(g.id),style:{textDecoration:"none"},children:n.jsx("h3",{className:"product-card-name",children:g.name})}),n.jsxs("div",{className:"product-card-pricing",children:[n.jsxs("div",{className:"product-card-price-new",children:["UGX ",E.toLocaleString()]}),I>E&&n.jsxs("div",{className:"product-card-price-old",children:["UGX ",I.toLocaleString()]})]}),n.jsx("div",{className:"product-card-reviews",children:L>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"product-card-review-stars",children:(r=>{const e=[],t=Math.floor(r),i=r%1!=0;for(let a=1;a<=5;a++)a<=t||a===t+1&&i?e.push(n.jsx("span",{className:"product-card-review-star",children:"★"},a)):e.push(n.jsx("span",{className:"product-card-review-star empty",children:"★"},a));return e})(L)}),n.jsxs("span",{className:"product-card-review-count",children:["(",M,")"]})]})})]})]})};export{g as P};
